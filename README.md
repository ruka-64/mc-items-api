# Minecraft Items API

Minecraft の主要アイテムすべてを API として提供します。

現在の対応バージョンは**1.21.4**です。そのため、README 内で使われる`{version}`には**1-21-4**が当てはまります。

> [!CAUTION]
> このコードはブログの画像をスクレイピングし、それを JSON 形式で提供するものです。使用して何らかの被害を受けた場合、私は一切の責任を負いません。

## Endpoints

- `GET /` - この API の名前を返します。
- `GET /list` - アイテムリストを返します。
  <br>
  レスポンスの例:
  ```json
  {
    "success": true,
    "cache": "HIT",
    "prefix": "/icons/1-21-4",
    "ext": "webp",
    "data": {
      "oak_log": "64-0001"
    }
  }
  ```
- `GET /:name` - アイテム名からファイル名を取得します。
  <br>
  例えば、ダイヤモンドブロックは`/diamond_block`で取得できます。
  レスポンスの例:
  ```json
  {
    "success": true,
    "url": "/icon/1-21-4/64-0337.webp"
  }
  ```
- `GET /icon/{version}/:id` - 画像を取得します。
  <br>
  例えば、ダイヤモンドブロックの場合はファイル名が`64-0337.webp`なので、`/icon/{version}/64-0337.webp`となります。
  <br>
  成功時は`image/webp`形式の画像が返却されますが、そうでない場合は`application/json`形式のデータを返します。

## キャッシュ

負荷削減のために、リストや画像データは Deno KV へキャッシュされます。TTL は 1 日です。

- `HIT`: キャッシュ済み
- `MISS`: キャッシュされていない、または期限切れ

確認したい場合は、以下の方法が使えます:

### JSON の場合

JSON 形式のレスポンスには`cache`というキーがありますので、そちらを確認してください。

### その他、画像等の場合

ヘッダーにある`X-MCAPI-Cache`を確認してください。
